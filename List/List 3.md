## 리스트 추상화3 - 컴파일 타임, 런타임 의존관계

**의존관계는 컴파일 타임과 런타임으로 나눌 수 있다.**
- 컴파일 타임(compile time): 코드 컴파일 시점을 뜻함. (코드 -> 기계어 변환 시점)
- 런타임(runtime): 프로그램 실행 시점을 뜻함. 

참고
> 컴파일은 고급 언어로 쓴 코드를 기계어로 변환해주는 것이다. (번역기)


**컴파일 타임 의존관계**
![[Pasted image 20250110180604.png]]
- 컴파일 타임 의존관계 == 자바 컴파일이 보는 의존관계, 클래스에 모든 의존관계가 다 나타난다.
- 쉽게 말해서 BatchProcessor 클래스에 써 있는 코드만 의존관계 이다. (정적으로 나타나는 의존관계)
- BatchProcessor 클래스를 보면 MyList 인터페이스만 사용한다. 따라서 BatchProcessor 클래스는 MyList 인터페이스에만 의존한다.

**런타임 의존관계**
![[Pasted image 20250110182911.png]]
- 런타임 의존관계는 프로그램이 실행될 때 보이는 의존관계이다.
- 위 사진에서는 BatchProcessor 클래스의 생성자에 MyArrayList 인스턴스를 주입받고 있다. 따라서 BatchProcessor 클래스는 MyArrayList를 의존하고 있다고 볼 수 있다.
- 런타임 의존관계는 프로그램 실행 중에 계속 변할 수 있다.
	- 프로그램 실행 중에 MyLinkedList 인스턴스를 주입 받으면 MyLinkedList를 의존하는  것이다. (동적으로 나타나는 의존관계)

**정리**
- BatchProcessor는 MyList 인터페이스를 의존한다. 따라서 런타임에 얼마든지 구현체를 변경할 수 있다.
- BatchProcessor에서 사용하는 리스트의 의존관계를 클래스에서 결정하는 것이 아닌, 런타임에 객체를 생성하는 시점으로 미루는 것이다. 따라서 런타임에 MyList의 구현체를 변경해도 BatchProcessor의 코드는 전혀 변경하지 않아도 되는것이다.
- 이렇게 런타임 시점에 생성자에 인스턴스를 주입하는것을 생성자 의존관계 주입 또는 생성자 주입이라고 한다.
- **클라이언트에서 클래스는 컴파일 타임에 추상적인 것에 의존하고, 런타임에 의존 관계 주입을 통해 구현체를 주입 받아 사용함으로써, 이런 이점을 얻을 수 있는 것이다..**


**전략 패턴**
> 전략 패턴은 알고리즘을 클라이언트 코드의 변경 없이 쉽게 교체하는 것을 말한다. 위에서 MyList 인터페이스를 BatchProcessor 클래스(클라이언트)가 의존하여 코드를 변경하지 않고 전략을 바꾸는 것
> MyList는 전략을 정의하는 인터페이스이며, MyArrayList, MyLinkedList는 전략을 정의하는 구현체이다. 이것이 디자인 패턴에서의 가장 중요한 전략 패턴이다.

