## 자바가 제공하는 Set2 - TreeSet 

**TreeSet**
- 구현: TreeSet은 이진 탐색 트리를 개선한 레드-블랙 트리를 내부에서 사용한다.
- 순서: 요소들은 정렬된 순서로 저장된다. 순서의 기준은 비교자(comparator)로 비교한다. (순서 예시, A -> B -> C)
- 시간 복잡도:  O(log n)의 시간 복잡도를 가진다.  HashSet 보다 느림.
- 용도: 범위 검색이나 정렬된 데이터가 필요한 경우에 유용한다.

### 트리 구조
![[Pasted image 20250131120150.png]]
- 트리는 부모 노드와 자식 노드로 구성된다.
- 가장 최상위 노드를 root라고 한다.
- 자식이 2개까지 올 수 있는 트리를 이진 트리라고 한다.
- 노드의 왼쪽 자식은 더 작은 값을, 노드의 오른쪽 자식 값은 더 큰 값을 가지는 것을 이진 탐색 트리라 한다.

**트리 구조의 구현**
![[Pasted image 20250131120542.png]]

~~~ java
public class Node {
	Object item;
	Node left;
	Node right;
}
~~~
- 트리는 왼쪽, 오른쪽 노드를 알고 있으면 된다.

**이진 탐색 트리 - 저장, 검색**
이진 탐색 트리는 데이터를 입력하는 시점에 정렬해서 보관한다.
20, 10, 40, 5, 15, 30, 50 … 순서로 저장한다고 가정하자.

![[Pasted image 20250131120932.png]]
- 데이터 저장
	- 10은 20보다 작으므로 왼쪽 노드, 40은 20보다 크므로 오른쪽 노드로 저장한다.
	- 5는 10보다 작으므로 왼쪽 노드, 15는 10보다 크므로 오른쪽 노드에 저장한다.
- 데이터 검색 (35를 검색한다고 가정)
	- 1번: root 20과 비교해서 35가 더 크므로 오른쪽 노드로 찾아간다.
	- 2번: 40보다는 작으므로 왼쪽 노드로 찾아간다.
	- 3번: 30보다는 크므로 오른쪽 노드로 찾아간다.
	- 4번: 노드에 있는 값을 비교. 35와 같으므로 35를 찾는다.

 데이터는 총 15개이지만  총 4번의 계산 끝에 값을 검색할 수 있었다. 시간 복잡도가 O(n) 이었다면 총 15번의 계산이 필요했을 것이다. 따라서 O(n)인 리스트의 검색보다는 빠르고 O(1)인 해시의 검색보다는 느리다.

여기서 이진 탐색 트리의 핵심은 데이터의 반을 날린다는 점이다.

### 이진 탐색 트리 최악의 경우
이진 탐색 트리의 검색, 삽입, 삭제의 평균 성능은 O(log n)이다. 하지만 트리의 균형이 맞지 않으면 최악의 경우 O(n)의 성능이 나온다.
![[Pasted image 20250131134006.png]]
- 이렇게 오른쪽 노드에 치우치게 되면 데이터 15를 검색할 때 데이터 수만큼 검색을 해야한다.
- 따라서 성능이 O(n)이 나올 수 있다.

**개선 방안**
![[Pasted image 20250131134359.png]]
- 중간에 있는 데이터 6를 기준으로 정렬한다.
- 자바의 TreeSet은 레드-블랙 트리를 사용해서 균형을 지속해서 유지한다. 따라서 최악의 경우에도 O(log n)의 성능을 제공한다.

### 이진 탐색 트리 - 순회
- 이진 탐색 트리의 핵심은 입력 순서가 아니라, 데이터의 값을 기준으로 정렬해서 저장한다는 점이다.
- 따라서 정렬된 순서로 데이터를 차례로 조회(순회)할 수 있다.
- 데이터를 차례대로 조회하려면 중위 순회라는 방법을 쓰면 된다.

**중위 순회 순서**
![[Pasted image 20250131120150.png]]
중위 순회 순서는 자신의 왼쪽 노드의 모든 노드를 처리하고, 자신의 노드를 처리한 후 자신의 오른쪽 노드를 처리하는 것이다. 예를 들어서
- 10의 기준에서 왼쪽 노드를 방문한다.
	- 5의 기준에서 왼쪽 노드 1을 출력한다.
	- 자신의 노드 5를 출력한 후 오른쪽 노드를 방문한다.
	- 6을 출력한다.
- 자신의 노드 10을 출력한 후 오른쪽 노드를 방문한다.
- 15를 기준으로 왼쪽 노드 11을 출력한다
- 자신의 노드 15을 출력한 후 오른쪽 노드를 방문한다.
- 16을 출력한다.

따라서 1, 5, 6, 10, 11, 15, 16 순서대로 출력된 것을 알 수 있다.


